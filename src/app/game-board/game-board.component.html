<mat-toolbar
  class="scoreboard sticky"
  [ngClass]="{
    red: game?.teamTurn === 1,
    blue: game?.teamTurn === 2
  }"
>
  <mat-toolbar-row fxLayout="row" fxLayoutAlign="space-between center">
    <div class="score" fxLayout="row">
      <mat-chip-list>
        <mat-chip color="accent" selected>{{
          cardsLeftTeam1?.length
        }}</mat-chip>
        -
        <mat-chip color="primary" selected>{{
          cardsLeftTeam2?.length
        }}</mat-chip>
      </mat-chip-list>
      <span class="turn"
        >{{ game?.teamTurn === 1 ? "Red's" : "Blue's" }} Turn
      </span>
    </div>
    <div fxHide fxShow.gt-sm>
      <div *ngTemplateOutlet="actions"></div>
    </div>
    <a mat-raised-button [routerLink]="['']">Leave Game</a>
  </mat-toolbar-row>

  <mat-toolbar-row fxHide.gt-sm>
    <ng-container *ngTemplateOutlet="gameCode"></ng-container>
  </mat-toolbar-row>

  <ng-template #gameCode>
    <div class="game-code">
      <button mat-raised-button (click)="showCode = !showCode">
        {{ showCode ? "Hide" : "Show" }} Code
      </button>
      <span [hidden]="!showCode">{{ game?.code }}</span>
    </div>
  </ng-template>

  <ng-template #actions>
    <div class="actions" fxLayout="row" fxLayoutGap="10px">
      <span class="" fxHide fxShow.gt-sm>
        <ng-container *ngTemplateOutlet="gameCode"></ng-container>
      </span>
      <button
        mat-raised-button
        *ngIf="game?.teamWon === 0"
        (click)="clickedShowTeams()"
      >
        I am Code Master
      </button>
      <button
        mat-raised-button
        *ngIf="game?.teamWon !== 0"
        (click)="newGame(gameId)"
      >
        New Game
      </button>
      <button mat-raised-button *ngIf="game?.teamWon === 0" (click)="endTurn()">
        End Turn
      </button>
    </div>
  </ng-template>

  <mat-toolbar-row fxHide.gt-sm>
    <ng-container *ngTemplateOutlet="actions"></ng-container>
  </mat-toolbar-row>
  <mat-toolbar-row *ngIf="game?.teamWon !== 0">
    <div class="winner">
      {{ game?.teamWon === 1 ? "Red Team Wins!!" : "" }}
      {{ game?.teamWon === 2 ? "Blue Team Wins!!" : "" }}
    </div>
  </mat-toolbar-row>
</mat-toolbar>

<div
  class="grid"
  [ngClass]="{
    'red-background': game?.teamTurn === 1,
    'blue-background': game?.teamTurn === 2
  }"
>
  <mat-card
    *ngFor="let card of game?.cards; trackBy: trackByFn"
    [ngClass]="{
      outline: showTeams || game?.teamWon !== 0,
      show: card.selected,
      team1: card.team === 1,
      team2: card.team === 2,
      neutral: card.team === 0,
      assassin: card.assassin
    }"
    (click)="clickedCard(card)"
  >
    <mat-card-content>
      <img [src]="card.pictureUrl" alt="" />
    </mat-card-content>
  </mat-card>
</div>
